local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local HomeBar = Instance.new("TextButton") -- Thanh ngang kiểu iPhone
local SpeedInput = Instance.new("TextBox")
local JumpInput = Instance.new("TextBox")
local ApplyBtn = Instance.new("TextButton")

-- Cấu hình ScreenGui
ScreenGui.Name = "FixedTopBarMenu"
ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- 1. THANH NGANG (HOME BAR) - Đặt chính xác như trong ảnh
HomeBar.Name = "HomeBar"
HomeBar.Parent = ScreenGui
HomeBar.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
HomeBar.BackgroundTransparency = 0.2 -- Độ trong suốt giống ảnh
HomeBar.BorderSizePixel = 0
-- Tọa độ X=210 (ngay sau icon Chat), Y=15 (ngang hàng Topbar)
HomeBar.Position = UDim2.new(0, 160, 0, 15) 
HomeBar.Size = UDim2.new(0, 80, 0, 4) -- Thanh mảnh giống iPhone
HomeBar.Text = ""
HomeBar.Active = true
HomeBar.Draggable = false -- Cố định theo ý bạn

local BarCorner = Instance.new("UICorner", HomeBar)
BarCorner.CornerRadius = UDim.new(1, 0)

-- 2. GIAO DIỆN CHÍNH (MAIN FRAME)
MainFrame.Name = "MainFrame"
MainFrame.Parent = HomeBar 
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
MainFrame.BackgroundTransparency = 0.1
MainFrame.Position = UDim2.new(0, 0, 0, 15) -- Xuất hiện ngay dưới thanh ngang
MainFrame.Size = UDim2.new(0, 130, 0, 140)
MainFrame.Visible = false -- Mặc định ẩn, bấm thanh ngang mới hiện

local MainCorner = Instance.new("UICorner", MainFrame)
MainCorner.CornerRadius = UDim.new(0, 8)

-- Input Tốc độ
SpeedInput.Parent = MainFrame
SpeedInput.PlaceholderText = "Speed..."
SpeedInput.Size = UDim2.new(0.8, 0, 0, 25)
SpeedInput.Position = UDim2.new(0.1, 0, 0.15, 0)
SpeedInput.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
SpeedInput.TextColor3 = Color3.fromRGB(255, 255, 255)
Instance.new("UICorner", SpeedInput)

-- Input Nhảy
JumpInput.Parent = MainFrame
JumpInput.PlaceholderText = "Jump..."
JumpInput.Size = UDim2.new(0.8, 0, 0, 25)
JumpInput.Position = UDim2.new(0.1, 0, 0.4, 0)
JumpInput.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
JumpInput.TextColor3 = Color3.fromRGB(255, 255, 255)
Instance.new("UICorner", JumpInput)

-- Nút Bật/Tắt
ApplyBtn.Parent = MainFrame
ApplyBtn.Text = "APPLY"
ApplyBtn.Size = UDim2.new(0.8, 0, 0, 30)
ApplyBtn.Position = UDim2.new(0.1, 0, 0.7, 0)
ApplyBtn.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ApplyBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
ApplyBtn.Font = Enum.Font.GothamBold
Instance.new("UICorner", ApplyBtn)

-- LOGIC
local active = false

-- Bấm thanh ngang để đóng/mở menu
HomeBar.MouseButton1Click:Connect(function()
    MainFrame.Visible = not MainFrame.Visible
end)

ApplyBtn.MouseButton1Click:Connect(function()
    local hum = game.Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if hum then
        active = not active
        if active then
            hum.WalkSpeed = tonumber(SpeedInput.Text) or 16
            hum.JumpPower = tonumber(JumpInput.Text) or 50
            ApplyBtn.Text = "RESET"
            ApplyBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
            ApplyBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
        else
            hum.WalkSpeed = 16
            hum.JumpPower = 50
            ApplyBtn.Text = "APPLY"
            ApplyBtn.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            ApplyBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
        end
    end
end)
