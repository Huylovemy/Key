local Bearlib = loadstring(game:HttpGet("https://raw.githubusercontent.com/Huylovemy/New/refs/heads/main/Huyzhud.lua"))()
local Bearlib = require(script)
local KeySettings = {
    Key = "Huydepzai",
    Link = "https://link4m.com/kjzVaRAh",
    FileName = "Bearhubkey"
}

local function LoadMainHub()
    if game:GetService("CoreGui"):FindFirstChild("Bear Library") then
        game:GetService("CoreGui")["Bear Library"]:Destroy()
    end

    local Window = Bearlib:MakeWindow({
        "Bearhud Hub",
        "by Quang Huy",
        "HuyzhudConfig.json"
    })

    local Tab1 = Window:MakeTab({
        "General", -- Tên Tab
        "home" -- Icon
    })

    Tab1:AddButton({
        "Farm Level",
        "Tự động cày cấp",
        function()
            print("Đang farm...")
        end
    })
    
    Tab1:AddToggle({
        "Auto Attack",
        "Tự động đánh",
        false, -- Mặc định
        function(Value)
            print("Auto Attack:", Value)
        end
    })

    -- Thêm các chức năng khác của bạn ở dưới này...
end

-- [[ 4. HỆ THỐNG KIỂM TRA KEY (Logic) ]] --

-- Kiểm tra xem đã từng nhập key đúng chưa (Lưu file)
local function CheckSavedKey()
    if isfile and isfile(KeySettings.FileName) then
        local SavedKey = readfile(KeySettings.FileName)
        if SavedKey == KeySettings.Key then
            return true
        end
    end
    return false
end

-- Nếu đã lưu key đúng thì vào thẳng Main Hub
if CheckSavedKey() then
    LoadMainHub()
else
    -- Nếu chưa có key, hiện giao diện Nhập Key
    local KeyWindow = Bearlib:MakeWindow({
        "Key System",
        "Vui lòng nhập Key",
        nil
    })

    local KeyTab = KeyWindow:MakeTab({
        "Authentication",
        "lock"
    })

    local InputKey = ""

    -- Ô nhập Key
    KeyTab:AddTextBox({
        "Enter Key", -- Tiêu đề
        "Nhập key vào đây...", -- Mô tả
        "", -- Mặc định
        false, -- Xóa text khi focus
        function(Value)
            InputKey = Value -- Lưu giá trị người dùng nhập
        end
    })

    -- Nút Kiểm tra Key
    KeyTab:AddButton({
        "Check Key",
        "Bấm để xác thực",
        function()
            if InputKey == KeySettings.Key then
                -- Nếu đúng Key
                if writefile then -- Lưu key lại
                    writefile(KeySettings.FileName, KeySettings.Key)
                end
                
                -- Thông báo nhẹ (Optional)
                -- print("Key đúng!")
                
                -- Load Menu chính
                LoadMainHub()
            else
                -- Nếu sai Key
                -- Bạn có thể dùng hàm Dialog của Bearlib để báo lỗi, hoặc đổi tên nút
                -- Ở đây mình dùng cách đổi Text nút để báo sai (đơn giản nhất)
                -- Lưu ý: Bearlib không return object nút để đổi text trực tiếp dễ dàng, 
                -- nên ta dùng kick hoặc print đơn giản.
                game:GetService("StarterGui"):SetCore("SendNotification", {
                    Title = "Sai Key!",
                    Text = "Vui lòng kiểm tra lại key.",
                    Duration = 3
                })
            end
        end
    })

    -- Nút lấy Link Key
    KeyTab:AddButton({
        "Get Key Link",
        "Copy link để lấy key",
        function()
            setclipboard(KeySettings.Link)
            game:GetService("StarterGui"):SetCore("SendNotification", {
                Title = "Copied!",
                Text = "Đã copy link key vào bộ nhớ tạm.",
                Duration = 3
            })
        end
    })
    
    KeyTab:AddDiscordInvite({
        "Join Discord",
        "Tham gia server để lấy key và hỗ trợ",
        "rbxassetid://...", -- Logo Discord (nếu có)
        "https://discord.gg/..." -- Link Discord
    })
end

